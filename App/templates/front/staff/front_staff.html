{% extends "layout.html" %}

{% block content %}
    <div class="container">
       <div class="row" style="margin-top: 20px">
         <div class="col-8">
            <div class="card">
            {% if flag==1 %}
                   <table class="table table-hover">
                      <thead class="thead-dark">
                        <tr>
                          <th scope="col">员工号</th>
                          <th scope="col">员工姓名</th>
                          <th scope="col">员工详情</th>
                          <th scope="col">操作</th>
                        </tr>
                      </thead>
                      <tbody>
                      {% for staff in staffs %}
                        <tr>
                          <th scope="row">{{ staff.id }}</th>
                          <td>{{ staff.name }}</td>
                          <td>
                              <a href="/schedulesystem/staff/detail?sid={{ staff.id }}">详情</a>
                          </td>
                          <td>
                              <a href="/schedulesystem/staff/modify?sid={{ staff.id }}" class="text-success">修改</a>
{#                              href="/schedulesystem/staff/delete?sid={{ staff.id }}"#}
                              <button style="border-radius: 10px;border: 0" class="text-danger" id="modal-btn" sid="{{ staff.id }}">删除</button>
                          </td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>
            {% else %}
                <h4 class="text-muted" style="margin-left: 40%;margin-top: 30px">请先登陆</h4>
            {% endif %}
            </div>
            </div>
            <div class="col-4">
            <div class="card">
                {% if flag==1 %}
                <img src="{{ url_for('static',filename='manager_img/manager_img01.jpg') }}" class="card-img-top" width="400px" alt="...">
                <div class="card-body">
                    <h5 class="card-title">您好经理{{ user.username }}！</h5>
                    <p class="card-text">欢迎使用蜜雪冰城智能排班系统</p>
                    <a href="{{ url_for('front.staff_add') }}" class="btn btn-primary">添加员工</a>
                </div>
                {% else %}
                <div class="card-body">
                    <h5 class="card-title">请先登陆，谢谢！</h5>
                    <p class="card-text">登陆之后可以对员工进行管理</p>
                    <a href="{{ url_for('admin.login') }}" class="btn btn-primary">登陆</a>
                </div>
                {% endif %}
            </div>
         </div>
       </div>
    </div>
    <div id="modal-self">
        <div id="modal-content">
            <p>确定删除吗？</p>
            <button class="btn btn-danger" id="delete">确定</button>
            <button class="btn btn-primary" id="cancel">取消</button>
        </div>
    </div>
<style>
 /* 弹窗背景 */
      #modal-self {
        width: 100%;
        height: 100%;
        /* 默认隐藏 */
        /* display: none; */
        /* 固定定位 */
        position: fixed;
        /* 设置在顶层 */
        z-index: 1000;
        /* 设置位置 */
        left: 0;
        top: 0;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.1);
        display: none;
      }
        /* 弹窗内容 */
        #modal-content {
        position: relative;
        background-color: #fff;
        margin: 10% auto;
        border: 1px solid #888;
        border-radius: 20px;
        width: 400px;
        height: 180px;
        z-index: 1001;
        text-align: center;
        padding: 20px;
        }
        #delete{
            position: absolute;
               right: 100px;
            bottom: 20px;
            z-index: 1002;
        }
         #cancel {
             position: absolute;
                right: 20px;
                bottom: 20px;
                z-index: 1002;
         }
</style>
    <script>
        // 获取元素
        var modal = document.getElementById('modal-self');
        var title = document.getElementById('title');
        var content = document.getElementById('modal-content');
        var btn = document.getElementsByClassName('text-danger');
        var deleteBtn = document.getElementById('delete');
        var cancelBtn = document.getElementById('cancel');
        // 点击按钮打开弹窗
        for (var i = 0; i < btn.length; i++) {
            btn[i].onclick = function() {
                modal.style.display = 'block';
                console.log('click');
            }
            var sid = btn[i].getAttribute('sid');
            console.log(sid);
            deleteBtn.onclick = function() {
                window.location.href = '/schedulesystem/staff/delete?sid=' + sid;
            }
        }
        // 点击关闭按钮关闭弹窗
        cancelBtn.onclick = function() {
            modal.style.display = 'none';
        }
        // 点击弹窗外部关闭弹窗
        window.onclick = function(e) {
            if (e.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
{% endblock %}